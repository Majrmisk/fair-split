<UserControl x:Class="FairSplit.Views.Components.GroupOverview"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:FairSplit.Views.Components" xmlns:viewmodels="clr-namespace:FairSplit.ViewModels.Components" d:DataContext="{d:DesignInstance Type=viewmodels:GroupOverViewModel}"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="600">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="58" />
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Label Style="{StaticResource BasicLabelStyle}" 
               Content="Unsettled Transactions"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"/>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>

            <DataGrid
                ItemsSource="{Binding Transactions}"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                HorizontalContentAlignment="Center"
                AutoGenerateColumns="False"
                GridLinesVisibility="None"
                IsReadOnly="True"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding TotalAmount}" Width="auto"/>
                    <DataGridTextColumn Header="Payer" Binding="{Binding NameOfPayer}" Width="auto"/>
                    <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="auto"/>
                    <DataGridTextColumn Header="Date" Binding="{Binding TransactionTime}" Width="auto"/>
                </DataGrid.Columns>
            </DataGrid>

            <Button Command="{Binding SettleCommand}" Grid.Row="1" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Content="Settle"  Margin="0 8 0 8" Height="40"/>
        </Grid>

        <Border Grid.Column="1" Background="#FF131313" Width="10" Grid.RowSpan="2" CornerRadius="5" HorizontalAlignment="Left" VerticalAlignment="Stretch" Margin="10,10,0,10"/>

        <ComboBox Grid.Column="2" 
                  ItemsSource="{Binding TimeframeOptions}"
                  SelectedItem="{Binding SelectedTimeframe}"
                  Width="200"
                  Margin="8"/>

        <Grid Grid.Row="1" Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <lvc:PieChart LegendLocation="None"
                          Hoverable="true"
                          MaxHeight="180"
                          InnerRadius="70"
                          Grid.Row="0"
                          Margin="10"
                          DisableAnimations="True"
                          Series="{Binding SpentByMembersPie}">
            </lvc:PieChart>

            <lvc:PieChart LegendLocation="None"
                          Hoverable="true"
                          MaxHeight="180"
                          InnerRadius="70"
                          Grid.Row="1"
                          Margin="10"
                          DisableAnimations="True"
                          Series="{Binding SpentByCategoryPie}">
            </lvc:PieChart>
        </Grid>
    </Grid>
</UserControl>
